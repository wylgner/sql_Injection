<?php
use PDO;
class Conexao {
    
    private static $instancia;
    
    private function __construct() {
        
    }
    
    public static function getInstancia(){
        if(!isset(self::$instancia)){
            self::$instancia = new PDO("mysql:host=localhost;dbname=teste", 'adm', '123321');
            self::$instancia->setAttribute(PDO::MYSQL_ATTR_INIT_COMMAND, "SET NAMES utf8");
            self::$instancia->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            self::$instancia->setAttribute(PDO::ATTR_ORACLE_NULLS, PDO::NULL_EMPTY_STRING);
        }
        return self::$instancia;
    }
    
    public function close(){
        if(isset(self::$instancia)){
            self::$instancia = null;
        }
    }
    
   $usuario = isset($_POST['usuario']) ? $_POST['usuario'] : '';
$senha = isset($_POST['senha']) ? $_POST['senha'] : '';
 
 
$PDO = db_connect();
 
$sql = "SELECT usuario, senha FROM usuarios WHERE usuario = :usuario AND senha = :senha";
$stmt = $PDO->prepare($sql);
 
$stmt->bindParam(':usuario', $usuario);
$stmt->bindParam(':senha', $senha);
 
$stmt->execute();
 
$users = $stmt->fetchAll(PDO::FETCH_ASSOC);
 
if (count($users) <= 0){
    echo "usuario ou senha incorretos";
    
}
 else {
  echo "logado com sucesso";
 }
}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <title>Título da página</title>
  <meta charset="utf-8">
</head>
<body>
 Teste sql injection
 <form action="index.php" method="POST">
  Usuario:<br>
  <input type="text" name="usuario"><br> 
  Senha:<br> 
  <input type="text" name="senha">
  <input type="submit" value="logar">
</form>
</body>
</html>
